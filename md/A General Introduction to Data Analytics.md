# A General Introduction to Data Analytics 数据分析：统计、描述、预测与应用

Joao Mendes Moreira, Andre de Carvalho, Tomas Horvath, 2019

个人评价：教科书风格，定义-公式-例题，对于梳理自己对数据分析领域的知识体系和填补盲区有帮助。但是书中的例子基本都是学院派的，对于真实商业场景而言太过理想化，实际应用方面讲得太浅。另外有些专有名词翻译得比较奇怪，都需要在脑子里翻译成英语才好理解，总的来讲不太推荐。

## 目录

* 第一部分 背景介绍
  * 第 1 章 可以用数据做什么
* 第二部分 理解数据
  * 第 2 章 描述统计学
  * 第 3 章 描述性多元分析
  * 第 4 章 数据质量和预处理
  * 第 5 章 聚类
  * 第 6 章 频繁模式挖掘
  * 第 7 章 描述性分析的备忘单和项目
* 第三部分 预测未知
  * 第 8 章 回归
  * 第 9 章 分类
  * 第 10 章 其他预测方法
  * 第 11 章 高级预测话题
  * 第 12 章 预测性分析的备忘单和项目
* 第四部分 常见的数据分析应用
  * 第 13 章 文本、网络和社交媒体应用

## 第 1 章 可以用数据做什么

学术界的方法：KDD

1. 学习应用域
2. 构建目标数据集
3. 数据清洗和预处理
4. 数据缩减和投影
5. 选择数据挖掘函数
6. 选择数据挖掘算法
7. 数据挖掘
8. 解释
9. 使用已发现的知识

工业界的方法：CRISP-DM

1. 业务理解
2. 数据理解
3. 数据准备
4. 建模
5. 评估
6. 部署

## 第 2 章 描述统计学

属性：定量，名义，序数

### 描述性单元分析

* 频数：绝对，相对（百分比）
* 位置单元分析
  * 最小值，最大值
  * 均值，中位数，众数（频率数最大者）
  * 第一四分位数，第二四分位数（中位数），第三四分位数
  * 标准差，平均绝对偏差

Tips:

* 箱形图可以用来描述一个属性分布的对称/偏态程度
* 中位数或众数在强偏态分布下比均值更稳健
* 当数据非常稀疏时，众数是没有用的

### 描述性双元分析

* 两个定量属性：协方差，Pearson 相关系数，Spearman 相关系数
* 两个定性属性，至少一个是名义属性：绝对联合频数，相对联合频数（比例）
* 两个序数属性：Spearman 等级相关，数据云，列联表，马赛克图

## 第 3 章 描述性多元分析

### 多元数据可视化

* 用颜色，形状，大小等表示第三个属性，热图，流图
* 三维图（不推荐）
* 平行坐标图
* 蛛网图或雷达图
* 交互式可视化

## 第 4 章 数据质量和预处理

### 数据质量

* 缺失值
  1. 忽略缺失值
  2. 删除对象
  3. 进行估算
* 冗余数据
  * 删除重复数据
* 不一致数据
  * 视为缺失值
* 噪声数据
  * 噪声过滤器
* 离群值
  * 合法值

### 类型转换

* 名义值：转换为相对值，二进制值，或预测属性中数值出现的频数（稀疏）
* 序数值：转换为相对或绝对尺度

### 规范化

归一化，最小最大调整

### 对数变换

### 维度降低

* 属性聚合：
  * 主成分分析 PCA
  * 独立成分分析 ICA
  * 多维缩放 MDS
* 属性选择：
  * 过滤器
  * 包装器
  * 嵌入模型
  * 搜索策略：贪婪顺序技术：前向选择和后向选择

## 第 5 章 聚类

### 距离度量

* 数值属性
  * 闵可夫斯基距离 Minkowski Distance：$d(p, q) = \sqrt{\displaystyle\sum_{k=1}^{m} \vert p_k - q_k \vert^{r}}$
* 字符序列
  * 汉明距离：两个字符串中对应字符或符号不同的位置数
  * 莱文斯坦距离（编辑距离）：讲一个序列转换为另一个序列所需的最小操作数（操作：插入，删除，替换）
  * 长文本（单词包）：变换为向量的欧氏距离
* 时间序列
  * 动态时间规整 Dynamic Time Warping，DTW：类似于编辑距离，返回两个时间序列之间的最佳匹配值
* 图像
  * 提取特征，计算特征向量之间的距离
  * 将图像转换为像素矩阵，计算矩阵向量的距离

### 聚类验证

* 外部度量（使用外部信息，如类标签，定义聚类质量，半监督聚类）：RAND，Jaccard
* 内部度量：轮廓指数（同时度量紧密度和分离度），组内平方和（只度量紧密度）
* 相对度量：比较由两个或多个聚类技术或同一技术多次运行找到的划分

### 聚类技术

* K 均值
* DBSCAN：带噪声应用的基于密度的空间聚类，自动确定聚类数量
* 凝聚层次聚类
* BIRCH：使用层次结构的平衡迭代减少和聚类，数据流挖掘

## 第 6 章 频繁模式挖掘

### 定义

* 项集：行（事务）表示用户，列（项）表示物品。
* 查找频繁项集：查找在不同事务中一起出现的“项集”，发现关联规则
* 支持度：给定项集所在的事务（行）数与数据中所有事务数之间的比率
* 最小支持度阈值 min_sup
* 最大频繁项集：如果所有超集都非频繁，则频繁项集是最大的
* 闭合频繁项集：如果自己的超集支持度都不同，则频繁项集是闭合的
* 关联规则：A 和 C 为没有共通项的项集，A 是规则的先导，C 是规则的后继，$A \implies C$，若 A 出现在某些事务中，则 C 也应该出现在这些事务中（并不一定完全成立，度量规则有效性）
* 关联规则的支持度：$support(A \implies C) = support(A \bigcup C)$
* 关联规则的置信度：$confidence(A \implies C) = \frac {support(A \bigcup C)} {support(A)}$
* 交叉支持度模式：模式包含低支持度项和高支持度项
* 提升度：$lift(X \implies Y) = \frac {confidence(X \implies Y)} {support(Y)}$

### 定理

* 单调性定理：如果一个项集是频繁的，那么它的每个子集也是频繁的；如果一个项集不频繁，那么它的超集都不会频繁
* 若一个项集是最大的，那么它也是闭合的，但反之不成立
* 关联规则的单调性：若 $X \implies Y - X$ 的置信度低于 min_conf，则所有规则 $X' \implies Y - X'$（其中 X' 为 X 的子集）的置信度也会比 min_conf 低。如果规则的置信度并不满足 min_conf，而且我们修改这个规则时从先导到它的后继移动一个或多个项，则修改规则的置信度也不会满足 min_conf。

### 频繁项集挖掘方法

遍历项集栅格，以搜索那些支持度大于或等于预定义的最小支持度阈值的项集

* Apriori 基于连接的方法（枚举树）
* Eclat 算法
* FP-Growth 频繁模式增长（FP 树，包含了关于数据中频繁项集的完整信息，同时又很紧凑，通常比创建它的数据集小得多）

### 序列模式：频繁序列挖掘

## 第 7 章 描述性分析的备忘单和项目

2 - 6 章的总结

## 第 8 章 回归

### 预测性能评估

评估模型的泛化能力：Holdout 方法，将数据分为训练集和测试集

分区主要方法：

* 随机子抽样
* K-fold 交叉验证
* Leave-one-out（小数据集）
* Bootstrap（小数据集）

性能度量

* 平均绝对误差 MAE
* 均方误差 MSE
* 均方根误差 RMSE
* 相对均方误差 RelMSE
* 变异系数

常见方法

* 线性回归
* 多元线性回归偏差小，方差大，用收缩方法稍微增加偏差同时减少误差
  * 岭回归
  * Lasso 回归

## 第 9 章 分类 + 第 10 章 其他预测方法

### 分类性能度量

* 假阳性率：第 I 类错误或误报率 $FPR = 1 - TNR = \frac{FP}{FP+TN}$
* 假阴性率：第 II 类错误或丢失率 $FNR = 1 - TPR = \frac{FN}{TP+FN}$
* 精确性：$Precision = \frac{TP+TN}{TP+TN+FP+FN}$
* 召回率或灵敏度：$Callback = TPR = \frac{TP}{TN+FP}$
* F1 值：$F1 = \frac{2}{1/Precision + 1/Callback}$

### 分类算法

* 基于距离的算法
  * k 近邻算法 k-NN
  * CBR Case Based Reasoning 基于案例的推理
* 基于概率的算法
  * 逻辑回归算法
  * 朴素贝叶斯（NB）算法
* 基于搜索的算法
  * 决策树归纳算法
  * 回归决策树
* 基于优化的算法
  * 人工神经网络 ANN
  * 支持向量机

## 第 11 章 高级预测话题

### 集成学习

* 并行
  * Bagging
  * 随机森林
* 顺序
  * AdaBoost
* 层次

### 数据准备技术

* 数据不平衡
  * 欠采样：减少多数类中的对象数量
  * 过采样：增加少数类中的对象数量
* 目标标签不完整
  * 半监督学习
  * 主动学习：使用一种策略选择标记最有利于分类模型归纳的实例

## 第 12 章 预测性分析的备忘单和项目

8 - 11 章的总结

## 第 13 章 文本、网络和社交媒体应用

### 文本挖掘

* 描述性文本挖掘
* 预测性文本挖掘
  * 文本分类

* 数据采集
* 特征提取
  * 词汇标记
  * 词干分析
  * 转换为结构数据
* 数据预处理
* 模型归纳
* 结果的评估和解释

* 趋势
  * 情感分析
  * 网络挖掘

### 推荐系统

* 显式反馈：系统要求用户直接表达对某件物品的偏好，评分或排名
* 隐式反馈：通过观察用户与系统的交互行为，浏览，点击，收藏，保存，购买等

推荐任务：考虑到组用户和项记录反馈，预测每对用户-项 (u, i) 的值 $r_{ui} = \hat{f}(u, i)$

推荐技术

* 基于知识的推荐技术：基于项属性，用户需求和域知识，交互式的，准备底层知识库成本高
* 基于内容的推荐技术：基于项属性和用户反馈，可以基于少量实例，对于过拟合很敏感，推荐范围窄
* 协同过滤：基于邻居的技术和基于模型的技术

### 社交网络分析

节点的属性

* 度 degree：节点的连接数
* 距离：信息从一个节点到另一个节点的最小边数
* 亲密度：反映了一个节点在网络中的可访问性 $closeness(v) = \frac{1}{\displaystyle\sum_{u\not=v}distance(u,v)}$
* 中间性：评估节点 v 在网络中位置的重要性 $betweeness(v) = \displaystyle\sum_{u\not=v\not=t}\frac{nsp_v(u,t)}{nsp(u,t)}$，其中 $nsp(u,t)$ 是从节点 u 到节点 t 最短路径的数量；nsp_v(u,t) 是经过节点 v 从节点 u 到节点 t 最短路径的数量。中间性度量那些信息必须要流经网络中的特定节点
* 聚类系数：衡量节点 v 被包含在三元组中的趋势 $clust\_coef(v) = \frac{\displaystyle\sum_{u\not=v\not=t}triangle(u,v,t)}{\displaystyle\sum_{u\not=v\not=t}triple(u,v,t)}$

网络的属性

* 直径
* 中心性
* 派系
* 聚类系数
* 模块性
